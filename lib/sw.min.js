(function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define('sw',[],t):'object'==typeof exports?exports.sw=t():e.sw=t()})(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(r,'a',r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='C:\\Users\\Tom\\PhpstormProjects\\ServiceWorker/lib',t(t.s=0)}([function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var n,o=r(1),a=r.n(o),d=r(2),i=r.n(d),s=r(3),l=r.n(s);const c=[],h=function(e,t){for(let r in t)if('URLS_TO_CACHE_BLACKLIST'==r||'UPDATE_BLACKLIST'==r)e[r]=e[r].concat(t[r]);else if('METHODS'==r)for(let e in t.METHODS)t.METHODS.hasOwnProperty(e)&&(y[e]=new Function(t.METHODS[e]));else e[r]=t[r];return e},u=async function(e){return String.fromCharCode.apply(String,e)},f=function(e){return new Promise(function(t){let r,n=new FileReader;n.onloadend=async function(){r=this.result,u(r).then(async function(e){let r=a.a(e);t(r)})},n.readAsArrayBuffer(e)})},p=async function(e){let t=!1,r=!1;for(let r of n.URLS_TO_CACHE_WHITELIST)if(null!==e.match(new RegExp(r,'gi'))){t=!0;break}if(t)for(let t of n.URLS_TO_CACHE_BLACKLIST)if(null!==e.match(new RegExp(t,'gi'))){r=!0;break}return t&&!r},m=async function(e){let t=!1,r=!1;for(let r of n.UPDATE_WHITELIST)if(null!==e.match(new RegExp(r,'gi'))){t=!0;break}if(t)for(let t of n.UPDATE_BLACKLIST)if(null!==e.match(new RegExp(t,'gi'))){r=!0;break}return t&&!r},b=async function(e,t){let r;r=e.url?e.url:e,p(r)&&caches.open(n.CACHE_NAME+n.VERSION).then(async function(e){e.put(r,t)})},_=async function(e,t=null){return navigator.onLine?null===t?fetch(e).then(async function(e){return e}):fetch(e,t).then(async function(e){return e}):null},g=async function(e,t){self.postMessage({type:e,message:t})},y=[];y.cacheFirst=function(e){return(async(e)=>{let t=e.request.clone();return caches.match(e.request.url).then(function(e){if(null!==e&&'error'!==e.type)return e;let r=t.clone();return _(t.url).then(function(e){if(null!==e&&'error'!==e){let t=e.clone();b(r,t)}return e})}).catch(function(){let e=t.clone();return _(t.url).then(function(t){if(null!==t&&'error'!==t){let r=t.clone();b(e,r)}return t})})})(e)},y.networkFirst=function(e){return(async(e)=>{let t=e.request.clone();return _(e.request.url).then(function(r){if(null!==r&&'error'!==r.type){let e=r.clone();return b(t,r),e}return caches.match(e.request.url).then(function(e){return e})})})(e)},y.staleWhileRevalidate=function(e){return(async(e)=>{let t=e.request.clone();return caches.match(e.request.url).then(function(r){return r&&'error'!==r.type?(c.push(e.request.url),null===v&&(v=setTimeout(E,500)),r):_(e.request.url).then(function(e){if(null!==e&&'error'!==e.type){let r=e.clone();b(t,r)}return e})}).catch(function(){return _(e.request.url).then(function(e){if(null!==e&&'error'!==e.type){let r=e.clone();b(t,r)}return e})})})(e)},y.requestFileUpdate=function(e){return(async(e)=>{caches.match(e).then(async function(t){if(!t||'error'===t.type){let r=!1;if(i.a.removeItem(e),await _(e).then(function(n){n&&'error'!==n.type?(t=n.clone(),b(e,n)):r=!0}),r)return}i.a.getItem(e).then(function(r){null===r?t.blob().then(function(t){f(t).then(function(t){i.a.setItem(e,t)})}):_(e).then(function(t){if(t&&'error'!==t.type){let n=t.clone();t.blob().then(function(t){f(t).then(function(t){t!==r&&(b(e,n),i.a.setItem(e,t),g(0,{file:e}))})})}})})}).catch(async function(){let t;_(e).then(function(r){r&&'error'!==r.type&&(t=r.clone(),b(e,r),i.a.getItem(e).then(function(r){null===r?t.blob().then(function(t){f(t).then(function(t){i.a.setItem(e,t)})}):_(e).then(function(t){if(t&&'error'!==t.type){let n=t.clone();t.blob().then(function(t){f(t).then(function(t){t!==r&&(b(e,n),i.a.setItem(e,t),g(0,{file:e}))})})}})}))})})})(e)},y.requestServerHash=function(e){return(async(e)=>{caches.match(e).then(async function(t){if(!t||'error'===t.type){let r=!1;if(i.a.removeItem(e),await _(e).then(function(n){n&&'error'!==n.type?(t=n.clone(),b(e,n)):r=!0}),r)return}i.a.getItem(e).then(function(r){null===r?t.blob().then(function(t){f(t).then(function(t){i.a.setItem(e,t)})}):_(n.HASH_ADDRESS,{method:'POST',headers:{Accept:'application/json',"Content-Type":'application/json'},body:JSON.stringify({url:e})}).then(async function(t){t.json().then(function(t){t.hash!==r&&_(e).then(function(r){r&&'error'!==r.type&&(b(e,r),i.a.setItem(e,t.hash),g(0,{file:e}))})})})})}).catch(async function(){let t;_(e).then(function(r){r&&'error'!==r.type&&(t=r.clone(),b(e,r),i.a.getItem(e).then(function(r){null===r?t.blob().then(function(t){f(t).then(function(t){i.a.setItem(e,t)})}):_(e,{method:'POST',headers:{Accept:'application/json',"Content-Type":'application/json'},body:JSON.stringify({url:e})}).then(async function(t){t.json().then(function(t){t.hash!==r&&_(e).then(function(r){r&&'error'!==r.type&&(b(e,r),i.a.setItem(e,t.hash),g(0,{file:e}))})})})}))})})})(e)};let v=null,I=!1;const E=async function(){if(0!==n.UPDATE_STRATEGY&&!I){if(I=!0,0<c.length){let e=c[0];c.splice(0,1),m(e).then(async function(t){t&&y[n.UPDATE_CALLBACKS[n.UPDATE_STRATEGY]](e)})}I=!1}v=setTimeout(E,500)};self.addEventListener('install',function(e){e.waitUntil(async function(){await fetch('sw_config.json').then(async function(e){await e.json().then(async function(e){n=h(new l.a,e.config)})}),console.log('Installed Service Worker v'+n.VERSION),n.developer&&console.log('[ServiceWorker] Deleting Caches...'),await caches.keys().then(async function(e){for(let t=0;t<e.length;t++)await caches.delete(e[t])}).then(async function(){n.developer&&console.log('[ServiceWorker] Precaching...');for(let e=0;e<n.PRE_CACHE.length;e++)_(n.PRE_CACHE[e]).then(async function(t){b(n.PRE_CACHE[e],t)})}).then(function(){n.developer&&console.log('[ServiceWorker] Done!'),self.skipWaiting()})}())}),self.addEventListener('fetch',function(e){null!==v&&(clearTimeout(v),v=setTimeout(E,500)),e.respondWith(async function(){return 0<n.FETCH_CALLBACKS.length&&n.FETCH_CALLBACKS[e.request.method]?y[n.FETCH_CALLBACKS[e.request.method]](e).then(async function(e){return y[n.STRATEGY_CALLBACKS[n.STRATEGY]](e).then(async function(e){return e})}):y[n.STRATEGY_CALLBACKS[n.STRATEGY]](e)}())}),self.addEventListener('activate',function(){fetch('sw_config.json').then(async function(e){let t=e.clone();e.blob().then(async function(e){f(e).then(async function(e){i.a.getItem('sw_config.json').then(async function(r){null===r?i.a.setItem('sw_config.json',e):r!==e&&(n.developer&&console.log('[ServiceWorker] Received Config Update!'),await t.json().then(async function(e){n=h(new l.a,e.config)}),i.a.setItem('sw_config.json',e),await caches.keys().then(async function(e){for(let t=0;t<e.length;t++)await caches.delete(e[t])}).then(async function(){n.developer&&console.log('[ServiceWorker] Precaching...');for(let e=0;e<n.PRE_CACHE.length;e++)_(n.PRE_CACHE[e]).then(async function(t){b(n.PRE_CACHE[e],t)})}).then(function(){n.developer&&console.log('[ServiceWorker] Done!'),g(1,{})}))})})})}),console.log('[ServiceWorker] Active and Ready!')}),self.onmessage=async function(e){let t=e.data;if(2===t.type){let e=new Function(t.method);y[t.name]=e,'STRATEGY'===t.callback?n.STRATEGY_CALLBACKS[Object.keys(n.STRATEGY_CALLBACKS).length]=t.name:'FETCH'===t.callback?n.FETCH_CALLBACKS[t.fetchMethod]=t.name:'UPDATE'===t.callback&&(n.UPDATE_CALLBACKS[Object.keys(n.UPDATE_CALLBACKS).length]=t.name)}else 3===t.type&&(n[t.field]=t.value)}},function(e){function t(e,t){var r=e[0],a=e[1],l=e[2],c=e[3];r=n(r,a,l,c,t[0],7,-680876936),c=n(c,r,a,l,t[1],12,-389564586),l=n(l,c,r,a,t[2],17,606105819),a=n(a,l,c,r,t[3],22,-1044525330),r=n(r,a,l,c,t[4],7,-176418897),c=n(c,r,a,l,t[5],12,1200080426),l=n(l,c,r,a,t[6],17,-1473231341),a=n(a,l,c,r,t[7],22,-45705983),r=n(r,a,l,c,t[8],7,1770035416),c=n(c,r,a,l,t[9],12,-1958414417),l=n(l,c,r,a,t[10],17,-42063),a=n(a,l,c,r,t[11],22,-1990404162),r=n(r,a,l,c,t[12],7,1804603682),c=n(c,r,a,l,t[13],12,-40341101),l=n(l,c,r,a,t[14],17,-1502002290),a=n(a,l,c,r,t[15],22,1236535329),r=o(r,a,l,c,t[1],5,-165796510),c=o(c,r,a,l,t[6],9,-1069501632),l=o(l,c,r,a,t[11],14,643717713),a=o(a,l,c,r,t[0],20,-373897302),r=o(r,a,l,c,t[5],5,-701558691),c=o(c,r,a,l,t[10],9,38016083),l=o(l,c,r,a,t[15],14,-660478335),a=o(a,l,c,r,t[4],20,-405537848),r=o(r,a,l,c,t[9],5,568446438),c=o(c,r,a,l,t[14],9,-1019803690),l=o(l,c,r,a,t[3],14,-187363961),a=o(a,l,c,r,t[8],20,1163531501),r=o(r,a,l,c,t[13],5,-1444681467),c=o(c,r,a,l,t[2],9,-51403784),l=o(l,c,r,a,t[7],14,1735328473),a=o(a,l,c,r,t[12],20,-1926607734),r=i(r,a,l,c,t[5],4,-378558),c=i(c,r,a,l,t[8],11,-2022574463),l=i(l,c,r,a,t[11],16,1839030562),a=i(a,l,c,r,t[14],23,-35309556),r=i(r,a,l,c,t[1],4,-1530992060),c=i(c,r,a,l,t[4],11,1272893353),l=i(l,c,r,a,t[7],16,-155497632),a=i(a,l,c,r,t[10],23,-1094730640),r=i(r,a,l,c,t[13],4,681279174),c=i(c,r,a,l,t[0],11,-358537222),l=i(l,c,r,a,t[3],16,-722521979),a=i(a,l,c,r,t[6],23,76029189),r=i(r,a,l,c,t[9],4,-640364487),c=i(c,r,a,l,t[12],11,-421815835),l=i(l,c,r,a,t[15],16,530742520),a=i(a,l,c,r,t[2],23,-995338651),r=s(r,a,l,c,t[0],6,-198630844),c=s(c,r,a,l,t[7],10,1126891415),l=s(l,c,r,a,t[14],15,-1416354905),a=s(a,l,c,r,t[5],21,-57434055),r=s(r,a,l,c,t[12],6,1700485571),c=s(c,r,a,l,t[3],10,-1894986606),l=s(l,c,r,a,t[10],15,-1051523),a=s(a,l,c,r,t[1],21,-2054922799),r=s(r,a,l,c,t[8],6,1873313359),c=s(c,r,a,l,t[15],10,-30611744),l=s(l,c,r,a,t[6],15,-1560198380),a=s(a,l,c,r,t[13],21,1309151649),r=s(r,a,l,c,t[4],6,-145523070),c=s(c,r,a,l,t[11],10,-1120210379),l=s(l,c,r,a,t[2],15,718787259),a=s(a,l,c,r,t[9],21,-343485551),e[0]=u(r,e[0]),e[1]=u(a,e[1]),e[2]=u(l,e[2]),e[3]=u(c,e[3])}function r(e,r,n,o,a,d){return r=u(u(r,e),u(o,d)),u(r<<a|r>>>32-a,n)}function n(e,n,o,a,d,i,s){return r(n&o|~n&a,e,n,d,i,s)}function o(e,n,o,a,i,l,s){return r(n&a|o&~a,e,n,i,l,s)}function i(e,n,o,a,d,i,s){return r(n^o^a,e,n,d,i,s)}function s(e,n,o,a,i,l,s){return r(o^(n|~a),e,n,i,l,s)}function a(e){txt='';var r,o=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=e.length;r+=64)t(n,d(e.substring(r-64,r)));e=e.substring(r-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<e.length;r++)a[r>>2]|=e.charCodeAt(r)<<(r%4<<3);if(a[r>>2]|=128<<(r%4<<3),55<r)for(t(n,a),r=0;16>r;r++)a[r]=0;return a[14]=8*o,t(n,a),n}function d(e){var t,r=[];for(t=0;64>t;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function l(e){for(var t='',r=0;4>r;r++)t+=f[15&e>>8*r+4]+f[15&e>>8*r];return t}function c(e){for(var t=0;t<e.length;t++)e[t]=l(e[t]);return e.join('')}function h(e){return c(a(e))}function u(e,t){return 4294967295&e+t}var f=['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'];if('5d41402abc4b2a76b9719d911017c592'!=h('hello')){}e.exports=h},function(e){var t,t;(function(t){e.exports=t()})(function(){return function a(d,e,n){function r(i,o){if(!e[i]){if(!d[i]){if(!o&&'function'==typeof t&&t)return t(i,!0);if(s)return s(i,!0);var c=new Error('Cannot find module \''+i+'\'');throw c.code='MODULE_NOT_FOUND',c}var h=e[i]={exports:{}};d[i][0].call(h.exports,function(t){var e=d[i][1][t];return r(e?e:t)},h,h.exports,a,d,e,n)}return e[i].exports}for(var s='function'==typeof t&&t,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(e,t){(function(e){'use strict';function r(){l=!0;for(var e,t,r=c.length;r;){for(t=c,c=[],e=-1;++e<r;)t[e]();r=c.length}l=!1}var n,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var a=0,d=new o(r),i=e.document.createTextNode('');d.observe(i,{characterData:!0}),n=function(){i.data=a=++a%2}}else if(!e.setImmediate&&'undefined'!=typeof e.MessageChannel){var s=new e.MessageChannel;s.port1.onmessage=r,n=function(){s.port2.postMessage(0)}}else n='document'in e&&'onreadystatechange'in e.document.createElement('script')?function(){var t=e.document.createElement('script');t.onreadystatechange=function(){r(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(r,0)};var l,c=[];t.exports=function(e){1!==c.push(e)||l||n()}}).call(this,'undefined'==typeof global?'undefined'==typeof self?'undefined'==typeof window?{}:window:self:global)},{}],2:[function(e,t,r){'use strict';function n(){}function o(e){if('function'!=typeof e)throw new TypeError('resolver must be a function');this.state=p,this.queue=[],this.outcome=void 0,e!==n&&l(this,e)}function a(e,t,r){this.promise=e,'function'==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),'function'==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function d(t,e,r){i(function(){var n;try{n=e(r)}catch(r){return h.reject(t,r)}n===t?h.reject(t,new TypeError('Cannot resolve promise with itself')):h.resolve(t,n)})}function s(e){var t=e&&e.then;if(e&&'object'==typeof e&&'function'==typeof t)return function(){t.apply(e,arguments)}}function l(e,t){function r(t){o||(o=!0,h.reject(e,t))}function n(t){o||(o=!0,h.resolve(e,t))}var o=!1,a=c(function(){t(n,r)});'error'===a.status&&r(a.value)}function c(e,t){var r={};try{r.value=e(t),r.status='success'}catch(t){r.status='error',r.value=t}return r}var i=e(1),h={},u=['REJECTED'],f=['FULFILLED'],p=['PENDING'];t.exports=r=o,o.prototype['catch']=function(e){return this.then(null,e)},o.prototype.then=function(e,t){if('function'!=typeof e&&this.state===f||'function'!=typeof t&&this.state===u)return this;var r=new this.constructor(n);if(this.state!==p){var o=this.state===f?e:t;d(r,o,this.outcome)}else this.queue.push(new a(r,e,t));return r},a.prototype.callFulfilled=function(e){h.resolve(this.promise,e)},a.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},a.prototype.callRejected=function(e){h.reject(this.promise,e)},a.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},h.resolve=function(e,t){var r=c(s,t);if('error'===r.status)return h.reject(e,r.value);var n=r.value;if(n)l(e,n);else{e.state=f,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},h.reject=function(e,t){e.state=u,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},r.resolve=function(e){return e instanceof this?e:h.resolve(new this(n),e)},r.reject=function(e){var t=new this(n);return h.reject(t,e)},r.all=function(e){function t(e,t){r.resolve(e).then(function(e){d[t]=e,++s!==o||a||(a=!0,h.resolve(c,d))},function(e){a||(a=!0,h.reject(c,e))})}var r=this;if('[object Array]'!==Object.prototype.toString.call(e))return this.reject(new TypeError('must be an array'));var o=e.length,a=!1;if(!o)return this.resolve([]);for(var d=Array(o),s=0,l=-1,c=new this(n);++l<o;)t(e[l],l);return c},r.race=function(e){function t(e){r.resolve(e).then(function(e){a||(a=!0,h.resolve(i,e))},function(e){a||(a=!0,h.reject(i,e))})}var r=this;if('[object Array]'!==Object.prototype.toString.call(e))return this.reject(new TypeError('must be an array'));var o=e.length,a=!1;if(!o)return this.resolve([]);for(var d=-1,i=new this(n);++d<o;)t(e[d]);return i}},{1:1}],3:[function(e){(function(t){'use strict';'function'!=typeof t.Promise&&(t.Promise=e(2))}).call(this,'undefined'==typeof global?'undefined'==typeof self?'undefined'==typeof window?{}:window:self:global)},{2:2}],4:[function(e,t){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(a){if('TypeError'!==a.name)throw a;for(var r='undefined'==typeof BlobBuilder?'undefined'==typeof MSBlobBuilder?'undefined'==typeof MozBlobBuilder?WebKitBlobBuilder:MozBlobBuilder:MSBlobBuilder:BlobBuilder,n=new r,o=0;o<e.length;o+=1)n.append(e[o]);return n.getBlob(t.type)}}function o(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function a(e,t,r){'function'==typeof t&&e.then(t),'function'==typeof r&&e['catch'](r)}function d(e){return'string'!=typeof e&&(console.warn(e+' used as a key, but it is not a string.'),e+=''),e}function i(){if(arguments.length&&'function'==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function s(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;o<t;o++)n[o]=e.charCodeAt(o);return r}function l(e){return new w(function(t){var r=e.transaction(U,W),o=n(['']);r.objectStore(U).put(o,'key'),r.onabort=function(r){r.preventDefault(),r.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||43<=parseInt(e[1],10))}})['catch'](function(){return!1})}function c(e){return'boolean'==typeof M?w.resolve(M):l(e).then(function(e){return M=e,M})}function h(e){var t=F[e.name],r={};r.promise=new w(function(e,t){r.resolve=e,r.reject=t}),t.deferredOperations.push(r),t.dbReady=t.dbReady?t.dbReady.then(function(){return r.promise}):r.promise}function u(e){var t=F[e.name],r=t.deferredOperations.pop();if(r)return r.resolve(),r.promise}function f(e,t){var r=F[e.name],n=r.deferredOperations.pop();if(n)return n.reject(t),n.promise}function p(t,e){return new w(function(r,n){if(t.db)if(e)h(t),t.db.close();else return r(t.db);var o=[t.name];e&&o.push(t.version);var a=H.open.apply(H,o);e&&(a.onupgradeneeded=function(r){var e=a.result;try{e.createObjectStore(t.storeName),1>=r.oldVersion&&e.createObjectStore(U)}catch(e){if('ConstraintError'===e.name)console.warn('The database "'+t.name+'" has been upgraded from version '+r.oldVersion+' to version '+r.newVersion+', but the storage "'+t.storeName+'" already exists.');else throw e}}),a.onerror=function(t){t.preventDefault(),n(a.error)},a.onsuccess=function(){r(a.result),u(t)}})}function m(e){return p(e,!1)}function b(e){return p(e,!0)}function _(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,o=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+'" can\'t be downgraded from version '+e.db.version+' to version '+e.version+'.'),e.version=e.db.version),o||r){if(r){var a=e.db.version+1;a>e.version&&(e.version=a)}return!0}return!1}function g(t){return new w(function(r,e){var n=new FileReader;n.onerror=e,n.onloadend=function(n){var e=btoa(n.target.result||'');r({__local_forage_encoded_blob:!0,data:e,type:t.type})},n.readAsBinaryString(t)})}function y(e){var t=s(atob(e.data));return n([t],{type:e.type})}function v(e){return e&&e.__local_forage_encoded_blob}function I(e){var t=this,r=t._initReady().then(function(){var e=F[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return a(r,e,e),r}function E(e){h(e);for(var t,r=F[e.name],n=r.forages,o=0;o<n.length;o++)t=n[o],t._dbInfo.db&&(t._dbInfo.db.close(),t._dbInfo.db=null);return m(e).then(function(t){for(var r=0;r<n.length;r++)n[r]._dbInfo.db=t;e.db=t}).then(function(){if(_(e))return b(e)})['catch'](function(t){throw f(e,t),t})}function S(e,t,r,n){n===void 0&&(n=1);try{var o=e.db.transaction(e.storeName,t);r(null,o)}catch(o){if(0<n&&(!e.db||'InvalidStateError'===o.name||'NotFoundError'===o.name))return w.resolve().then(function(){if(!e.db||'NotFoundError'===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),b(e)}).then(function(){return E(e).then(function(){S(e,t,r,n-1)})})['catch'](r);r(o)}}function A(e){var t,r,n,o,a,d=0.75*e.length,i=e.length,s=0;'='===e[e.length-1]&&(d--,'='===e[e.length-2]&&d--);var l=new ArrayBuffer(d),c=new Uint8Array(l);for(t=0;t<i;t+=4)r=z.indexOf(e[t]),n=z.indexOf(e[t+1]),o=z.indexOf(e[t+2]),a=z.indexOf(e[t+3]),c[s++]=r<<2|n>>4,c[s++]=(15&n)<<4|o>>2,c[s++]=(3&o)<<6|63&a;return l}function C(e){var t,r=new Uint8Array(e),n='';for(t=0;t<r.length;t+=3)n+=z[r[t]>>2],n+=z[(3&r[t])<<4|r[t+1]>>4],n+=z[(15&r[t+1])<<2|r[t+2]>>6],n+=z[63&r[t+2]];return 2==r.length%3?n=n.substring(0,n.length-1)+'=':1==r.length%3&&(n=n.substring(0,n.length-2)+'=='),n}function T(e,t,r,n){e.executeSql('CREATE TABLE IF NOT EXISTS '+t.storeName+' (id INTEGER PRIMARY KEY, key unique, value)',[],r,n)}function R(e,r,n,o,a,d){e.executeSql(n,o,a,function(e,i){i.code===i.SYNTAX_ERR?e.executeSql('SELECT name FROM sqlite_master WHERE type=\'table\' AND name = ?',[name],function(e,t){t.rows.length?d(e,i):T(e,r,function(){e.executeSql(n,o,a,d)},d)},d):d(e,i)},d)}function N(e,t,r,n){var a=this;e=d(e);var i=new w(function(o,d){a.ready().then(function(){void 0===t&&(t=null);var i=t,s=a._dbInfo;s.serializer.serialize(t,function(l,t){t?d(t):s.db.transaction(function(r){R(r,s,'INSERT OR REPLACE INTO '+s.storeName+' (key, value) VALUES (?, ?)',[e,l],function(){o(i)},function(e,t){d(t)})},function(t){if(t.code===t.QUOTA_ERR){if(0<n)return void o(N.apply(a,[e,i,r,n-1]));d(t)}})})})['catch'](d)});return o(i,r),i}function j(e){return new w(function(r,n){e.transaction(function(o){o.executeSql('SELECT name FROM sqlite_master WHERE type=\'table\' AND name <> \'__WebKitDatabaseInfoTable__\'',[],function(n,t){for(var o=[],a=0;a<t.rows.length;a++)o.push(t.rows.item(a).name);r({db:e,storeNames:o})},function(e,t){n(t)})},function(e){n(e)})})}function L(e,t){var r=e.name+'/';return e.storeName!==t.storeName&&(r+=e.storeName+'/'),r}function k(){var e='_localforage_support_test';try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(t){return!0}}function D(){return!k()||0<localStorage.length}function O(e,t){e[t]=function(){var r=arguments;return e.ready().then(function(){return e[t].apply(e,r)})}}function x(){for(var e,t=1;t<arguments.length;t++)if(e=arguments[t],e)for(var r in e)e.hasOwnProperty(r)&&(arguments[0][r]=he(e[r])?e[r].slice():e[r]);return arguments[0]}var P='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},H=function(){try{if('undefined'!=typeof indexedDB)return indexedDB;if('undefined'!=typeof webkitIndexedDB)return webkitIndexedDB;if('undefined'!=typeof mozIndexedDB)return mozIndexedDB;if('undefined'!=typeof OIndexedDB)return OIndexedDB;if('undefined'!=typeof msIndexedDB)return msIndexedDB}catch(t){}}();'undefined'==typeof Promise&&e(3);var M,F,w=Promise,U='local-forage-detect-blob-support',B=Object.prototype.toString,q='readonly',W='readwrite',K={_driver:'asyncStorage',_initStorage:function(e){function t(){return w.resolve()}var r=this,n={db:null};if(e)for(var o in e)n[o]=e[o];F||(F={});var a=F[n.name];a||(a={forages:[],db:null,dbReady:null,deferredOperations:[]},F[n.name]=a),a.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=I);for(var d,i=[],s=0;s<a.forages.length;s++)d=a.forages[s],d!==r&&i.push(d._initReady()['catch'](t));var l=a.forages.slice(0);return w.all(i).then(function(){return n.db=a.db,m(n)}).then(function(e){return n.db=e,_(n,r._defaultConfig.version)?b(n):e}).then(function(e){n.db=a.db=e,r._dbInfo=n;for(var t,o=0;o<l.length;o++)t=l[o],t!==r&&(t._dbInfo.db=n.db,t._dbInfo.version=n.version)})},_support:function(){try{if(!H)return!1;var e='undefined'!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t='function'==typeof fetch&&-1!==fetch.toString().indexOf('[native code');return(!e||t)&&'undefined'!=typeof indexedDB&&'undefined'!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(e,t){var r=this,n=new w(function(t,n){r.ready().then(function(){S(r._dbInfo,q,function(o,a){if(o)return n(o);try{var d=a.objectStore(r._dbInfo.storeName),i=d.openCursor(),s=1;i.onsuccess=function(){var r=i.result;if(r){var n=r.value;v(n)&&(n=y(n));var o=e(n,r.key,s++);void 0===o?r['continue']():t(o)}else t()},i.onerror=function(){n(i.error)}}catch(t){n(t)}})})['catch'](n)});return o(n,t),n},getItem:function(e,t){var r=this;e=d(e);var n=new w(function(t,n){r.ready().then(function(){S(r._dbInfo,q,function(o,a){if(o)return n(o);try{var d=a.objectStore(r._dbInfo.storeName),i=d.get(e);i.onsuccess=function(){var e=i.result;void 0===e&&(e=null),v(e)&&(e=y(e)),t(e)},i.onerror=function(){n(i.error)}}catch(t){n(t)}})})['catch'](n)});return o(n,t),n},setItem:function(e,t,r){var n=this;e=d(e);var a=new w(function(r,o){var a;n.ready().then(function(){return a=n._dbInfo,'[object Blob]'===B.call(t)?c(a.db).then(function(e){return e?t:g(t)}):t}).then(function(t){S(n._dbInfo,W,function(a,d){if(a)return o(a);try{var i=d.objectStore(n._dbInfo.storeName),s=i.put(t,e);null===t&&(t=void 0),d.oncomplete=function(){void 0===t&&(t=null),r(t)},d.onabort=d.onerror=function(){var e=s.error?s.error:s.transaction.error;o(e)}}catch(t){o(t)}})})['catch'](o)});return o(a,r),a},removeItem:function(e,t){var r=this;e=d(e);var n=new w(function(t,n){r.ready().then(function(){S(r._dbInfo,W,function(o,a){if(o)return n(o);try{var d=a.objectStore(r._dbInfo.storeName),i=d['delete'](e);a.oncomplete=function(){t()},a.onerror=function(){n(i.error)},a.onabort=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(t){n(t)}})})['catch'](n)});return o(n,t),n},clear:function(e){var t=this,r=new w(function(e,r){t.ready().then(function(){S(t._dbInfo,W,function(n,o){if(n)return r(n);try{var a=o.objectStore(t._dbInfo.storeName),d=a.clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=d.error?d.error:d.transaction.error;r(e)}}catch(t){r(t)}})})['catch'](r)});return o(r,e),r},length:function(e){var t=this,r=new w(function(e,r){t.ready().then(function(){S(t._dbInfo,q,function(n,o){if(n)return r(n);try{var a=o.objectStore(t._dbInfo.storeName),d=a.count();d.onsuccess=function(){e(d.result)},d.onerror=function(){r(d.error)}}catch(t){r(t)}})})['catch'](r)});return o(r,e),r},key:function(e,t){var r=this,n=new w(function(t,n){return 0>e?void t(null):void r.ready().then(function(){S(r._dbInfo,q,function(o,a){if(o)return n(o);try{var d=a.objectStore(r._dbInfo.storeName),i=!1,s=d.openCursor();s.onsuccess=function(){var r=s.result;return r?void(0===e?t(r.key):i?t(r.key):(i=!0,r.advance(e))):void t(null)},s.onerror=function(){n(s.error)}}catch(t){n(t)}})})['catch'](n)});return o(n,t),n},keys:function(e){var t=this,r=new w(function(e,r){t.ready().then(function(){S(t._dbInfo,q,function(n,o){if(n)return r(n);try{var a=o.objectStore(t._dbInfo.storeName),d=a.openCursor(),i=[];d.onsuccess=function(){var t=d.result;return t?void(i.push(t.key),t['continue']()):void e(i)},d.onerror=function(){r(d.error)}}catch(t){r(t)}})})['catch'](r)});return o(r,e),r},dropInstance:function(e,t){t=i.apply(this,arguments);var r=this.config();e='function'!=typeof e&&e||{},e.name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,a=this;if(!e.name)n=w.reject('Invalid arguments');else{var d=e.name===r.name&&a._dbInfo.db?w.resolve(a._dbInfo.db):m(e);n=e.storeName?d.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1;h(e);for(var n,o=F[e.name],a=o.forages,d=0;d<a.length;d++)n=a[d],n._dbInfo.db&&(n._dbInfo.db.close(),n._dbInfo.db=null,n._dbInfo.version=r);var i=new w(function(t,n){var o=H.open(e.name,r);o.onerror=n,o.onupgradeneeded=function(){var t=o.result;t.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;t(e)}});return i.then(function(e){for(var t,r=0;r<a.length;r++)t=a[r],t._dbInfo.db=e,u(t._dbInfo)})['catch'](function(t){throw(f(e,t)||w.resolve())['catch'](function(){}),t})}}):d.then(function(){h(e);for(var t,r=F[e.name],n=r.forages,o=0;o<n.length;o++)t=n[o],t._dbInfo.db&&(t._dbInfo.db.close(),t._dbInfo.db=null);var a=new w(function(t,r){var n=H.deleteDatabase(e.name);n.onerror=n.onblocked=r,n.onsuccess=t});return a.then(function(){for(var e=0;e<n.length;e++)u(t._dbInfo)})['catch'](function(t){throw(f(e,t)||w.resolve())['catch'](function(){}),t})})}return o(n,t),n}},z='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',G=/^~~local_forage_type~([^~]+)~/,Y='__lfsc__:',V=Y.length,Q='arbf',X='blob',J='si08',Z='ui08',$='uic8',ee='si16',te='si32',re='ur16',ne='ui32',oe='fl32',ae='fl64',de=V+Q.length,ie=Object.prototype.toString,se={serialize:function(t,r){var e='';if(t&&(e=ie.call(t)),t&&('[object ArrayBuffer]'===e||t.buffer&&'[object ArrayBuffer]'===ie.call(t.buffer))){var n,o=Y;t instanceof ArrayBuffer?(n=t,o+=Q):(n=t.buffer,'[object Int8Array]'===e?o+=J:'[object Uint8Array]'===e?o+=Z:'[object Uint8ClampedArray]'===e?o+=$:'[object Int16Array]'===e?o+=ee:'[object Uint16Array]'===e?o+=re:'[object Int32Array]'===e?o+=te:'[object Uint32Array]'===e?o+=ne:'[object Float32Array]'===e?o+=oe:'[object Float64Array]'===e?o+=ae:r(new Error('Failed to get type for BinaryArray'))),r(o+C(n))}else if('[object Blob]'===e){var a=new FileReader;a.onload=function(){var e='~~local_forage_type~'+t.type+'~'+C(this.result);r(Y+X+e)},a.readAsArrayBuffer(t)}else try{r(JSON.stringify(t))}catch(n){console.error('Couldn\'t convert value into a JSON string: ',t),r(null,n)}},deserialize:function(e){if(e.substring(0,V)!==Y)return JSON.parse(e);var t,r=e.substring(de),o=e.substring(V,de);if(o===X&&G.test(r)){var a=r.match(G);t=a[1],r=r.substring(a[0].length)}var d=A(r);switch(o){case Q:return d;case X:return n([d],{type:t});case J:return new Int8Array(d);case Z:return new Uint8Array(d);case $:return new Uint8ClampedArray(d);case ee:return new Int16Array(d);case re:return new Uint16Array(d);case te:return new Int32Array(d);case ne:return new Uint32Array(d);case oe:return new Float32Array(d);case ae:return new Float64Array(d);default:throw new Error('Unkown type: '+o);}},stringToBuffer:A,bufferToString:C},le={_driver:'webSQLStorage',_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]='string'==typeof e[n]?e[n]:e[n].toString();var o=new w(function(e,n){try{r.db=openDatabase(r.name,r.version+'',r.description,r.size)}catch(t){return n(t)}r.db.transaction(function(o){T(o,r,function(){t._dbInfo=r,e()},function(e,t){n(t)})},n)});return r.serializer=se,o},_support:function(){return'function'==typeof openDatabase}(),iterate:function(e,t){var r=this,n=new w(function(n,o){r.ready().then(function(){var a=r._dbInfo;a.db.transaction(function(r){R(r,a,'SELECT * FROM '+a.storeName,[],function(r,t){for(var o=t.rows,d=o.length,s=0;s<d;s++){var i=o.item(s),l=i.value;if(l&&(l=a.serializer.deserialize(l)),l=e(l,i.key,s+1),void 0!==l)return void n(l)}n()},function(e,t){o(t)})})})['catch'](o)});return o(n,t),n},getItem:function(e,t){var r=this;e=d(e);var n=new w(function(n,o){r.ready().then(function(){var a=r._dbInfo;a.db.transaction(function(r){R(r,a,'SELECT * FROM '+a.storeName+' WHERE key = ? LIMIT 1',[e],function(e,t){var r=t.rows.length?t.rows.item(0).value:null;r&&(r=a.serializer.deserialize(r)),n(r)},function(e,t){o(t)})})})['catch'](o)});return o(n,t),n},setItem:function(e,t,r){return N.apply(this,[e,t,r,1])},removeItem:function(e,t){var r=this;e=d(e);var n=new w(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){R(r,o,'DELETE FROM '+o.storeName+' WHERE key = ?',[e],function(){t()},function(e,t){n(t)})})})['catch'](n)});return o(n,t),n},clear:function(e){var t=this,r=new w(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(o){R(o,n,'DELETE FROM '+n.storeName,[],function(){e()},function(e,t){r(t)})})})['catch'](r)});return o(r,e),r},length:function(e){var t=this,r=new w(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(o){R(o,n,'SELECT COUNT(key) as c FROM '+n.storeName,[],function(r,t){var n=t.rows.item(0).c;e(n)},function(e,t){r(t)})})})['catch'](r)});return o(r,e),r},key:function(e,t){var r=this,n=new w(function(n,o){r.ready().then(function(){var a=r._dbInfo;a.db.transaction(function(r){R(r,a,'SELECT key FROM '+a.storeName+' WHERE id = ? LIMIT 1',[e+1],function(e,t){var r=t.rows.length?t.rows.item(0).key:null;n(r)},function(e,t){o(t)})})})['catch'](o)});return o(n,t),n},keys:function(e){var t=this,r=new w(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(o){R(o,n,'SELECT key FROM '+n.storeName,[],function(r,t){for(var n=[],o=0;o<t.rows.length;o++)n.push(t.rows.item(o).key);e(n)},function(e,t){r(t)})})})['catch'](r)});return o(r,e),r},dropInstance:function(e,t){t=i.apply(this,arguments);var r=this.config();e='function'!=typeof e&&e||{},e.name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,a=this;return n=e.name?new w(function(t){var n;n=e.name===r.name?a._dbInfo.db:openDatabase(e.name,'','',0),e.storeName?t({db:n,storeNames:[e.storeName]}):t(j(n))}).then(function(e){return new w(function(t,r){e.db.transaction(function(n){function o(e){return new w(function(t,r){n.executeSql('DROP TABLE IF EXISTS '+e,[],function(){t()},function(e,t){r(t)})})}for(var a=[],d=0,i=e.storeNames.length;d<i;d++)a.push(o(e.storeNames[d]));w.all(a).then(function(){t()})['catch'](function(t){r(t)})},function(e){r(e)})})}):w.reject('Invalid arguments'),o(n,t),n}},ce={_driver:'localStorageWrapper',_initStorage:function(e){var t=this,r={};if(e)for(var n in e)r[n]=e[n];return(r.keyPrefix=L(e,t._defaultConfig),!D())?w.reject():(t._dbInfo=r,r.serializer=se,w.resolve())},_support:function(){try{return'undefined'!=typeof localStorage&&'setItem'in localStorage&&'function'==typeof localStorage.setItem}catch(t){return!1}}(),iterate:function(e,t){var r=this,n=r.ready().then(function(){for(var t,n=r._dbInfo,o=n.keyPrefix,a=o.length,d=localStorage.length,s=1,l=0;l<d;l++)if(t=localStorage.key(l),0===t.indexOf(o)){var i=localStorage.getItem(t);if(i&&(i=n.serializer.deserialize(i)),i=e(i,t.substring(a),s++),void 0!==i)return i}});return o(n,t),n},getItem:function(e,t){var r=this;e=d(e);var n=r.ready().then(function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n});return o(n,t),n},setItem:function(e,t,r){var n=this;e=d(e);var a=n.ready().then(function(){void 0===t&&(t=null);var r=t;return new w(function(o,a){var d=n._dbInfo;d.serializer.serialize(t,function(t,n){if(n)a(n);else try{localStorage.setItem(d.keyPrefix+e,t),o(r)}catch(t){('QuotaExceededError'===t.name||'NS_ERROR_DOM_QUOTA_REACHED'===t.name)&&a(t),a(t)}})})});return o(a,r),a},removeItem:function(e,t){var r=this;e=d(e);var n=r.ready().then(function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return o(n,t),n},clear:function(e){var t=this,r=t.ready().then(function(){for(var e,r=t._dbInfo.keyPrefix,n=localStorage.length-1;0<=n;n--)e=localStorage.key(n),0===e.indexOf(r)&&localStorage.removeItem(e)});return o(r,e),r},length:function(e){var t=this,r=t.keys().then(function(e){return e.length});return o(r,e),r},key:function(e,t){var r=this,n=r.ready().then(function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t});return o(n,t),n},keys:function(e){var t=this,r=t.ready().then(function(){for(var e,r=t._dbInfo,n=localStorage.length,o=[],a=0;a<n;a++)e=localStorage.key(a),0===e.indexOf(r.keyPrefix)&&o.push(e.substring(r.keyPrefix.length));return o});return o(r,e),r},dropInstance:function(e,t){if(t=i.apply(this,arguments),e='function'!=typeof e&&e||{},!e.name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,a=this;return n=e.name?new w(function(t){e.storeName?t(L(e,a._defaultConfig)):t(e.name+'/')}).then(function(e){for(var t,r=localStorage.length-1;0<=r;r--)t=localStorage.key(r),0===t.indexOf(e)&&localStorage.removeItem(t)}):w.reject('Invalid arguments'),o(n,t),n}},he=Array.isArray||function(e){return'[object Array]'===Object.prototype.toString.call(e)},ue={},fe={},pe={INDEXEDDB:K,WEBSQL:le,LOCALSTORAGE:ce},me=[pe.INDEXEDDB._driver,pe.WEBSQL._driver,pe.LOCALSTORAGE._driver],be=['dropInstance'],_e=['clear','getItem','iterate','key','keys','length','removeItem','setItem'].concat(be),ge={description:'',driver:me.slice(),name:'localforage',size:4980736,storeName:'keyvaluepairs',version:1},ye=function(){function e(t){for(var n in r(this,e),pe)if(pe.hasOwnProperty(n)){var o=pe[n],a=o._driver;this[n]=a,ue[a]||this.defineDriver(o)}this._defaultConfig=x({},ge),this._config=x({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)['catch'](function(){})}return e.prototype.config=function(e){if('object'===('undefined'==typeof e?'undefined':P(e))){if(this._ready)return new Error('Can\'t call config() after localforage has been used.');for(var t in e){if('storeName'==t&&(e[t]=e[t].replace(/\W/g,'_')),'version'==t&&'number'!=typeof e[t])return new Error('Database version must be a number.');this._config[t]=e[t]}return'driver'in e&&e.driver?this.setDriver(this._config.driver):!0}return'string'==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new w(function(t,r){try{var n=e._driver,a=new Error('Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver');if(!e._driver)return void r(a);for(var d=_e.concat('_initStorage'),s=0,i=d.length;s<i;s++){var l=d[s],c=0>be.indexOf(l);if((c||e[l])&&'function'!=typeof e[l])return void r(a)}var h=function(){for(var t,r=function(e){return function(){var t=new Error('Method '+e+' is not implemented by the current driver'),r=w.reject(t);return o(r,arguments[arguments.length-1]),r}},n=0,a=be.length;n<a;n++)t=be[n],e[t]||(e[t]=r(t))};h();var u=function(r){ue[n]&&console.info('Redefining LocalForage driver: '+n),ue[n]=e,fe[n]=r,t()};'_support'in e?e._support&&'function'==typeof e._support?e._support().then(u,r):u(!!e._support):u(!0)}catch(t){r(t)}});return a(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=ue[e]?w.resolve(ue[e]):w.reject(new Error('Driver not found.'));return a(n,t,r),n},e.prototype.getSerializer=function(e){var t=w.resolve(se);return a(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return a(r,e,e),r},e.prototype.setDriver=function(e,t,r){function n(){i._config.driver=i.driver()}function o(e){return i._extend(e),n(),i._ready=i._initStorage(i._config),i._ready}function d(e){return function(){function t(){for(;r<e.length;){var a=e[r];return r++,i._dbInfo=null,i._ready=null,i.getDriver(a).then(o)['catch'](t)}n();var d=new Error('No available storage method found.');return i._driverSet=w.reject(d),i._driverSet}var r=0;return t()}}var i=this;he(e)||(e=[e]);var s=this._getSupportedDrivers(e),l=null===this._driverSet?w.resolve():this._driverSet['catch'](function(){return w.resolve()});return this._driverSet=l.then(function(){var e=s[0];return i._dbInfo=null,i._ready=null,i.getDriver(e).then(function(e){i._driver=e._driver,n(),i._wrapLibraryMethodsWithReady(),i._initDriver=d(s)})})['catch'](function(){n();var e=new Error('No available storage method found.');return i._driverSet=w.reject(e),i._driverSet}),a(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!fe[e]},e.prototype._extend=function(e){x(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t,r=[],n=0,o=e.length;n<o;n++)t=e[n],this.supports(t)&&r.push(t);return r},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=_e.length;e<t;e++)O(this,_e[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),ve=new ye;t.exports=ve},{3:3}]},{},[4])(4)})},function(e){e.exports=class{constructor(){this.VERSION='1.0.0',this.developer=!0,this.CACHE_NAME=location.hostname+'-v',this.URLS_TO_CACHE_WHITELIST=['.*'],this.URLS_TO_CACHE_BLACKLIST=[],this.PRE_CACHE=[],this.UPDATE_WHITELIST=['.*'],this.UPDATE_BLACKLIST=[],this.STRATEGY=2,this.STRATEGY_CALLBACKS={0:'networkFirst',1:'cacheFirst',2:'staleWhileRevalidate'},this.FETCH_CALLBACKS={},this.UPDATE_STRATEGY=1,this.UPDATE_CALLBACKS={0:null,1:'requestFileUpdate',2:'requestServerHash'},this.HASH_ADDRESS='/gethash',this.MESSAGE_TYPES={0:'receivedUpdate',1:'receivedConfigUpdate',2:'methodToRegister'}}}}])});
//# sourceMappingURL=sw.min.js.map